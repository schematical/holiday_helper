{
  "name": "long-stack-traces",
  "description": "Long stacktraces for V8 implemented in user-land JavaScript.",
  "version": "0.1.2",
  "author": {
    "name": "Tom Robinson",
    "email": "tom@tlrobinson.net",
    "url": "http://tlrobinson.net/"
  },
  "main": "./lib/long-stack-traces",
  "directories": {
    "lib": "./lib"
  },
  "engines": {
    "node": "*"
  },
  "readme": "Long Stacktraces\n================\n\nLong stacktraces for V8 implemented in user-land JavaScript. Supports Chrome/Chromium and Node.js.\n\nBackground\n----------\n\nA common problem when debugging event-driven JavaScript is stack traces are limited to a single \"event\", so it's difficult to trace the code path that caused an error.\n\nA contrived example (taken from the PDF referenced below):\n\n    function f() {\n        throw new Error('foo');\n    }\n\n    setTimeout(f, Math.random()*1000);\n    setTimeout(f, Math.random()*1000);\n\nWhich one throws the first error?\n\nNode.js intended to fix this problem with a solution called \"Long Stacktraces\": http://nodejs.org/illuminati0.pdf\n\nBut what if we wanted something like this in the browser? It turns out V8 already has everything needed to implement this in user-land JavaScript (although in a slightly hacky way).\n\nV8 has a [stack trace API](http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi) that allows custom formatting of textual stack trace representations. By wrapping any function that registers an asynchronous event callback (e.x. `setTimeout` and `addEventListener` in the browser) we can store the stack trace at the time of callback registration, and later append it to stack traces. This also works for multiple levels of events (a timeout or event registered within a timeout or event, etc).\n\nUsage\n-----\n\nFor Node.js install using `npm install long-stack-traces`.\n\nSimply include the \"long-stack-traces.js\" via a script tag or other method before any event listener or timeout registrations. In Node.js call `require(\"long-stack-traces\")`.\n\nStack traces from example above:\n\n    Uncaught Error: foo\n        at f (index.html:24:23)\n        ----------------------------------------\n        at setTimeout\n        at onload (index.html:28:40)\n    Uncaught Error: foo\n        at f (index.html:24:23)\n        ----------------------------------------\n        at setTimeout\n        at onload (index.html:27:40)\n\nNote one was from the timeout on line 27, the other on line 28. Events' stack traces are divided by a line of dashes.\n\nSee examples.html for more examples, and run `node examples.js` for a Node.js example.\n\nSupported APIs\n--------------\n\nCurrently supports the following APIs:\n\n### Chromium ###\n* `setTimeout`\n* `setInterval`\n* `addEventListener`\n* `XMLHttpRequest.onreadystatechange` (stack actually recorded upon `send()`)\n\n### Node.js ###\n* `setTimeout`\n* `setInterval`\n* `process.nextTick`\n* `EventEmitter.addListener`\n* `EventEmitter.on`\n* All APIs that use `EventEmitter`\n\nTODO\n----\n\n* Gracefully degrade in non-V8 environments.\n* Figure out what's up with these stack frames when throwing an exception from an input's event handler:\n    <error: TypeError: Accessing selectionEnd on an input element that cannot have a selection.>\n* Configurable stack trace length limit to prevent memory leaks (not _technically_ a leak). Trivial example:\n    function foo() {\n        setTimeout(foo, 1000);\n    }\n    foo();\n\nLicense\n-------\n\nCopyright (c) 2011, Thomas Robinson <tom@tlrobinson.net>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n",
  "readmeFilename": "README.md",
  "_id": "long-stack-traces@0.1.2",
  "_from": "long-stack-traces@0.1.2"
}
